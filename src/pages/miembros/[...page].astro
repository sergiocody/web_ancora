---
/* MIEMBROS ARCHIVE PAGES */
import { getEntry } from "astro:content";
import PageLayoutArchive from "@layouts/PageLayoutArchive.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths({ paginate }) {
  const posts = (await getCollection("miembros")).sort(
    (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
  );
  const { data } = await getEntry("config", "miembros");
  return paginate(posts, { pageSize: data.per_page });
}

const posts = (await getCollection("miembros")).sort(
  (a, b) => a.data.date.valueOf() - b.data.date.valueOf(),
);
const base_url = import.meta.env.PORTFOLIO_SLUG;
const { page } = Astro.props;
const { data } = await getEntry("config", "miembros");

// Usar filters en lugar de tag para que funcione con ItemFilter
const filters = data.project_tags ? data.project_tags.map((t) => t.name) : [];
---

<PageLayoutArchive {page} {filters} {data} {base_url} tag_links={false} />
